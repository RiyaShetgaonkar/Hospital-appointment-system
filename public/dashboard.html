<!DOCTYPE html>
<html lang="en">
<head>
  <title>Care Connect - Home</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body {
      background-color: #f0f8ff;
      font-family: 'Arial', sans-serif;
      color: #003366;
      margin: 0;
      padding: 0;
      height: 100vh;
      line-height: 1.6;
    }
    header {
      background-color: #ffffff;
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 8px rgba(0, 51, 102, 0.15);
      border-bottom: 2px solid #4682b4;
    }
    .logo {
      font-size: 32px;
      color: #003366;
      font-weight: bold;
    }
    .profile {
      position: relative;
      cursor: pointer;
    }
    .profile i {
      font-size: 35px;
      color: #4682b4;
      border: 3px solid #4682b4;
      border-radius: 50%;
      padding: 5px;
      background-color: #ffffff;
    }
    .dropdown {
      display: none;
      position: absolute;
      right: 0;
      top: 50px;
      background-color: #ffffff;
      border: 2px solid #4682b4;
      border-radius: 8px;
      min-width: 150px;
      z-index: 1;
      box-shadow: 0 4px 12px rgba(0, 51, 102, 0.15);
    }
    .dropdown a {
      color: #003366;
      padding: 10px 12px;
      text-decoration: none;
      display: block;
      font-size: 16px;
      font-weight: 500;
    }
    .dropdown a:hover {
      background-color: #f0f8ff;
    }
    .main-body {
      padding: 50px 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }
  </style>
</head>

<body>

<header>
  <div></div>
  <div class="logo">Care Connect</div>
  <div class="profile" id="profile">
    <i class="fas fa-user-circle"></i>
    <div class="dropdown" id="dropdown">
      <a href="viewdetails.html"><i class="fas fa-user"></i> View My Details</a>
      <a href="change-details.html"><i class="fas fa-edit"></i> Edit My Details</a>
      <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Log Out</a>
    </div>
  </div>
</header>

<div class="main-body"> <div class="welcome"> <h1>Welcome to Care Connect</h1> <p>Your gateway to quality healthcare in Goa. Select a hospital below to explore services and book appointments.</p> </div> 
<div class="hospital-card"
     onclick="window.location.href='appointment-page.html'">
  <i class="fas fa-hospital"></i>
  <div class="content">
    <h3>Goa Medical College and Hospital (GMC)</h3>
    <p>Bambolim (Central Goa) - Comprehensive healthcare services.</p>
  </div>
</div>


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDomNH7V0dxt_trHrUwghmUqd9eoUHxWYo",
    authDomain: "hospital-system-88ee9.firebaseapp.com",
    projectId: "hospital-system-88ee9",
    appId: "1:1052835799972:web:81b5f73457d76b777ad731"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

// ðŸš« Prevent back button access after logout
window.history.pushState(null, null, window.location.href);
window.addEventListener('popstate', () => {
  window.history.pushState(null, null, window.location.href);
});


  onAuthStateChanged(auth, (user) => {
    if (!user) window.location.href = "login.html";
  });

  const profile = document.getElementById('profile');
  const dropdown = document.getElementById('dropdown');

  profile.addEventListener('click', () => {
    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
  });

 document.getElementById('logoutBtn').addEventListener('click', async (e) => {
  e.preventDefault();

  await signOut(auth);

  // ðŸ”’ Replace instead of redirect (kills browser history)
  window.location.replace("login.html");
});


  window.addEventListener('click', (e) => {
    if (!profile.contains(e.target)) dropdown.style.display = 'none';
  });
</script>

</body>
</html>
